<div id="createModal" class="modal">
    <div class="box">
        <h3>Create Student</h3>
        <form id="createForm" method="POST" action="{{ url('students') }}">
            @csrf
            <div style="display:grid; gap:12px">
                <div class="form-group">
                    <label for="create_student_no">Student Number</label>
                    <input id="create_student_no" name="student_no" required>
                </div>

                <div style="display:grid; grid-template-columns:1fr 1fr 1fr; gap:8px">
                    <div class="form-group">
                        <label for="create_last_name">Last Name</label>
                        <input id="create_last_name" name="last_name" required>
                    </div>

                    <div class="form-group">
                        <label for="create_first_name">First Name</label>
                        <input id="create_first_name" name="first_name" required>
                    </div>

                    <div class="form-group">
                        <label for="create_middle_name">Middle Name</label>
                        <input id="create_middle_name" name="middle_name">
                    </div>
                </div>

                <div class="form-group">
                    <label for="create_email">Email Address</label>
                    <input id="create_email" name="email" type="email">
                </div>

                <div style="display:grid; grid-template-columns:1fr 1fr; gap:8px">
                    <div class="form-group">
                        <label for="create_gender">Gender</label>
                        <select id="create_gender" name="gender">
                            <option value="">-- Select Gender --</option>
                            <option value="M">Male</option>
                            <option value="F">Female</option>
                        </select>
                    </div>

                    <div class="form-group">
                        <label for="create_birthdate">Birth Date</label>
                        <input id="create_birthdate" name="birthdate" type="date">
                    </div>
                </div>

                <div style="display:grid; grid-template-columns:1fr 1fr; gap:8px">
                    <div class="form-group">
                        <label for="create_year_level">Year Level</label>
                        <select id="create_year_level" name="year_level">
                            <option value="">-- Select Year Level --</option>
                            @for($i=1;$i<=5;$i++)
                                <option value="{{ $i }}">{{ $i }}</option>
                            @endfor
                        </select>
                    </div>

                    <div class="form-group">
                        <label for="create_program_id">Program</label>
                        <select id="create_program_id" name="program_id">
                            <option value="">-- Select Program --</option>
                            @foreach($programs as $prog)
                                <option value="{{ $prog->program_id }}">{{ $prog->program_name }}</option>
                            @endforeach
                        </select>
                    </div>
                </div>
            </div>
            <div style="margin-top:16px; display:flex; gap:8px; justify-content:flex-end">
                <button type="button" onclick="closeModal('createModal')" class="btn-secondary">Cancel</button>
                <button type="submit">Create</button>
            </div>
        </form>
    </div>
</div>

<div id="editModal" class="modal">
    <div class="box">
        <h3>Edit Student</h3>
        <form id="editForm" method="POST" action="{{ url('students') }}">
            @csrf
            @method('PUT')
            <input type="hidden" name="student_id">
            <div style="display:grid; gap:12px">
                <div class="form-group">
                    <label for="edit_student_no">Student Number</label>
                    <input id="edit_student_no" name="student_no" required>
                </div>

                <div style="display:grid; grid-template-columns:1fr 1fr 1fr; gap:8px">
                    <div class="form-group">
                        <label for="edit_last_name">Last Name</label>
                        <input id="edit_last_name" name="last_name" required>
                    </div>

                    <div class="form-group">
                        <label for="edit_first_name">First Name</label>
                        <input id="edit_first_name" name="first_name" required>
                    </div>

                    <div class="form-group">
                        <label for="edit_middle_name">Middle Name</label>
                        <input id="edit_middle_name" name="middle_name">
                    </div>
                </div>

                <div class="form-group">
                    <label for="edit_email">Email Address</label>
                    <input id="edit_email" name="email" type="email">
                </div>

                <div style="display:grid; grid-template-columns:1fr 1fr; gap:8px">
                    <div class="form-group">
                        <label for="edit_gender">Gender</label>
                        <select id="edit_gender" name="gender">
                            <option value="">-- Select Gender --</option>
                            <option value="M">Male</option>
                            <option value="F">Female</option>
                        </select>
                    </div>

                    <div class="form-group">
                        <label for="edit_birthdate">Birth Date</label>
                        <input id="edit_birthdate" name="birthdate" type="date">
                    </div>
                </div>

                <div style="display:grid; grid-template-columns:1fr 1fr; gap:8px">
                    <div class="form-group">
                        <label for="edit_year_level">Year Level</label>
                        <select id="edit_year_level" name="year_level">
                            <option value="">-- Select Year Level --</option>
                            @for($i=1;$i<=5;$i++)
                                <option value="{{ $i }}">{{ $i }}</option>
                            @endfor
                        </select>
                    </div>

                    <div class="form-group">
                        <label for="edit_program_id">Program</label>
                        <select id="edit_program_id" name="program_id">
                            <option value="">-- Select Program --</option>
                            @foreach($programs as $prog)
                                <option value="{{ $prog->program_id }}">{{ $prog->program_name }}</option>
                            @endforeach
                        </select>
                    </div>
                </div>
            </div>
            <div style="margin-top:16px; display:flex; gap:8px; justify-content:flex-end">
                <button type="button" onclick="closeModal('editModal')" class="btn-secondary">Cancel</button>
                <button type="submit">Save</button>
            </div>
        </form>
    </div>
</div>

<div id="deleteModal" class="modal">
    <div class="box">
        <h3>Confirm Delete</h3>
        <p>Are you sure you want to delete this student?</p>
        <form id="deleteForm" method="POST" action="{{ url('students') }}">
            @csrf
            @method('DELETE')
            <input type="hidden" name="student_id">
            <div style="display:flex; gap:8px; justify-content:flex-end">
                <button type="button" onclick="closeModal('deleteModal')" class="btn-secondary">Cancel</button>
                <button type="submit">Delete</button>
            </div>
        </form>
    </div>
</div>

<div id="filterModal" class="modal">
    <div class="box">
        <h3>Filter Students</h3>
        <form id="filterForm" method="GET" action="{{ url('students') }}">
            <div style="display:grid; gap:12px">
                <div class="form-group">
                    <label for="filter_year_level">Year Level</label>
                    <select id="filter_year_level" name="year_level">
                        <option value="">All Year Levels</option>
                        @for($i=1;$i<=5;$i++)
                            <option value="{{ $i }}" {{ request('year_level')==$i ? 'selected' : '' }}>Year {{ $i }}</option>
                        @endfor
                    </select>
                </div>

                <div class="form-group">
                    <label for="filter_program_id">Program</label>
                    <select id="filter_program_id" name="program_id">
                        <option value="">All Programs</option>
                        @foreach($programs as $prog)
                            <option value="{{ $prog->program_id }}" {{ request('program_id')==$prog->program_id ? 'selected' : '' }}>
                                {{ $prog->program_name }}
                            </option>
                        @endforeach
                    </select>
                </div>

                <div class="form-group">
                    <label for="filter_gender">Gender</label>
                    <select id="filter_gender" name="gender">
                        <option value="">All</option>
                        <option value="M" {{ request('gender')=='M' ? 'selected' : '' }}>Male</option>
                        <option value="F" {{ request('gender')=='F' ? 'selected' : '' }}>Female</option>
                    </select>
                </div>
            </div>
            <div style="margin-top:16px; display:flex; gap:8px; justify-content:flex-end">
                <button type="button" onclick="closeModal('filterModal')" class="btn-secondary">Cancel</button>
                <button type="submit">Apply Filters</button>
            </div>
        </form>
    </div>
</div>